"use strict";!function(){angular.module("Campaign",[]).config(["$interpolateProvider",function(e){e.startSymbol("{["),e.endSymbol("]}")}])}(),function(){function e(e,t,n,o,a,i,c,r,u,s,l){var h=this;h.accountInfo={},h.getAccount=function(){e.account().then(function(e){200==e.status&&(h.accountInfo=e.data,new Date(h.accountInfo.tokenExpire)<new Date&&(h.accountInfo.accessToken=""))})},h.init=function(){h.getAccount(),t.getCampaigns().then(function(e){200==e.status?h.listCampaigns=e.data:r.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")}).catch(function(){r.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")})},h.saveCampaign=function(e){if(!e)return void r.error("Kiểm tra lại dữ liệu và thử lại.","Lỗi!");t.saveCampaign(h.campaign).then(function(e){if(200==e.status){if(h.campaign._id){for(var t in h.listCampaigns)if(h.listCampaigns[t]._id==h.campaign._id){h.listCampaigns[t]=e.data;break}}else h.listCampaigns||(h.listCampaigns=[]),h.listCampaigns.unshift(e.data);i.CampaignForm.$setPristine(),h.campaign=e.data,r.success("Lưu bài đăng thành công.","Thành công!")}else r.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")}).catch(function(e){r.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")})},h.removeCampaign=function(e,n){confirm("Bạn có chắc chắn muốn xóa?")&&t.removeCampaign(e).then(function(e){200==e.status&&e.data?(r.success("Xóa bài đăng thành công.","Thành công!"),h.listCampaigns.splice(n,1),h.resetCampaign()):r.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")}).catch(function(e){r.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")})},h.runCampaign=function(e){confirm("Bạn chắc chắn muốn chạy chiến dịch này?")&&t.runCampaign(e).then(function(e){200==e.status&&e.data?r.success(e.data.msg,"Thành công!"):r.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")}).catch(function(e){r.error(e.data.message,"Lỗi!")})},h.selectCampaign=function(e){h.campaign=e,Common.scrollTo("#campaign-top","fast"),h.postTypeChange()},h.resetCampaign=function(){h.campaign={}},h.postTypeChange=function(){"feed"==h.campaign.postType?n.getFeeds().then(function(e){200==e.status?h.listFeeds=e.data:r.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")}).catch(function(){r.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")}):o.getAlbums().then(function(e){200==e.status?h.listAlbums=e.data:r.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")}).catch(function(){r.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")})}}e.$inject=["UserService","CampaignService","FeedService","AlbumService","$cookies","$scope","$rootScope","toastr","$timeout","$facebook","$http"],angular.module("Campaign").controller("CampaignController",e)}(),function(){function e(e){return{getCampaigns:function(){return e.get(apiPath+"/api/campaign/getCampaigns")},saveCampaign:function(t){return e.post(apiPath+"/api/campaign/saveCampaign",t)},removeCampaign:function(t){return e.post(apiPath+"/api/campaign/removeCampaign",{campaignId:t})},runCampaign:function(t){return e.post(apiPath+"/api/campaign/runCampaign",{campaignId:t})},stopCampaign:function(t){return e.post(apiPath+"/api/campaign/stopCampaign",{campaignId:t})}}}e.$inject=["$http"],angular.module("Campaign").service("CampaignService",e)}(),function(){angular.module("Album",[]).config(["$interpolateProvider",function(e){e.startSymbol("{["),e.endSymbol("]}")}])}(),function(){function e(e,t,n,o,a,i,c,r,u){var s=this;s.accountInfo={},s.getAccount=function(){e.account().then(function(e){200==e.status&&(s.accountInfo=e.data,new Date(s.accountInfo.tokenExpire)<new Date&&(s.accountInfo.accessToken=""))})},s.init=function(){s.getAccount(),t.getAlbums().then(function(e){200==e.status?s.listAlbums=e.data:a.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")}).catch(function(){a.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")})},s.saveAlbum=function(e){if(!e)return void a.error("Kiểm tra lại dữ liệu và thử lại.","Lỗi!");s.album.photos||(s.album.photos=[]),s.tmpPhotoNames&&(s.album.photos=s.album.photos.concat(s.tmpPhotoNames)),t.saveAlbum(s.album).then(function(e){if(200==e.status){var t=[];console.log("image",s.tmpPhotos,s.tmpPhotoNames),s.tmpPhotos.map(function(n,o){var a=s.tmpPhotoNames[o];t.push(function(t){u.upload({url:apiPath+"/api/upload/image",data:{file:n,filename:a.replace(/.[^.]+$/g,""),type:"albums/"+e.data._id}}).then(function(e){console.log("success",e),t(null)},function(e){console.log("err",e),t(!0)},function(e){})})}),async.parallel(t,function(t,n){if(s.defaultPhotos(),s.album._id){for(var o in s.listAlbums)if(s.listAlbums[o]._id==s.album._id){s.listAlbums[o]=e.data;break}}else s.listAlbums||(s.listAlbums=[]),s.listAlbums.unshift(e.data);s.album=e.data,a.success("Lưu bài đăng thành công.","Thành công!")})}else a.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")}).catch(function(e){a.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")})},s.removeAlbum=function(e,n){confirm("Bạn có chắc chắn muốn xóa?")&&t.removeAlbum(e).then(function(e){200==e.status&&e.data?(a.success("Xóa bài đăng thành công.","Thành công!"),s.listAlbums.splice(n,1),s.resetAlbum()):a.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")}).catch(function(e){a.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")})},s.selectAlbum=function(e){s.album=e,s.defaultPhotos(),Common.scrollTo("#album-top","fast")},s.resetAlbum=function(){s.album={},s.defaultPhotos()},s.defaultPhotos=function(){s.tmpPhotos=[],s.tmpPhotoNames=[]},s.defaultPhotos(),s.uploadFiles=function(e,t){console.log(e,t);for(var n in e){var o=e[n];s.tmpPhotoNames.push((new Date).getTime()+"-"+o.name),s.tmpPhotos.push(o)}},s.removePhoto=function(e){s.tmpPhotos.splice(e,1),s.tmpPhotoNames.splice(e,1)},s.removeSavedPhoto=function(e){s.album.photos.splice(e,1)}}e.$inject=["UserService","AlbumService","$cookies","$rootScope","toastr","$timeout","$facebook","$http","Upload"],angular.module("Album").controller("AlbumController",e)}(),function(){function e(e){return{getAlbums:function(){return e.get(apiPath+"/api/album/getAlbums")},saveAlbum:function(t){return e.post(apiPath+"/api/album/saveAlbum",t)},removeAlbum:function(t){return e.post(apiPath+"/api/album/removeAlbum",{albumId:t})}}}e.$inject=["$http"],angular.module("Album").service("AlbumService",e)}();var Common=function(){return{scrollTo:function(e,t){e=e||"html,body",t=t||"slow",$("html,body").animate({scrollTop:$(e).offset().top},t)}}}();!function(){angular.module("Core",[]).config(["$interpolateProvider",function(e){e.startSymbol("{["),e.endSymbol("]}")}])}(),function(){function e(){return{restrict:"AE",templateUrl:"modules/web-core/views/js/template/error-message.html",replace:!0,scope:{errorMessage:"=",matchTarget:"=",typeContent:"="},link:function(e,t,n){function o(){e.typeContent!=e.matchTarget?e.errorMessage.match=!0:e.errorMessage.match=!1}e.$watch("typeContent",function(e){o()}),e.$watch("matchTarget",function(e){o()})}}}function t(){return{restrict:"A",scope:{showLoading:"="},link:function(e,t,n){e.$watch("showLoading",function(e){e&&$(t).fadeIn("fast")})}}}angular.module("Core").directive("errorMessage",e).directive("showLoading",t)}(),function(){function e(e,t,n){return{response:function(t){return 200==t.status&&(t.data.noAccessToken&&e.$broadcast("NO_ACCESS_TOKEN_ERROR"),t.data.tokenHasExpired&&e.$broadcast("TOKEN_HAS_EXPIRED_ERROR"),t.data.rejectApi)?n.reject({status:!1,data:{message:"You have access token!"},handle:"PreResponse"}):t}}}e.$inject=["$rootScope","$timeout","$q"],angular.module("Core").factory("PreResponse",e).config(["$httpProvider",function(e){e.interceptors.push("PreResponse")}])}(),function(){angular.module("Feed",[]).config(["$interpolateProvider",function(e){e.startSymbol("{["),e.endSymbol("]}")}])}(),function(){function e(e,t,n,o,a,i,c,r){var u=this;u.accountInfo={},u.getAccount=function(){e.account().then(function(e){200==e.status&&(u.accountInfo=e.data,new Date(u.accountInfo.tokenExpire)<new Date&&(u.accountInfo.accessToken=""))})},u.init=function(){u.getAccount(),t.getFeeds().then(function(e){200==e.status?u.listFeeds=e.data:a.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")}).catch(function(){a.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")})},u.saveFeed=function(e){if(!e)return void a.error("Kiểm tra lại dữ liệu và thử lại.","Lỗi!");t.saveFeed(u.feed).then(function(e){if(200==e.status){if(u.feed._id){for(var t in u.listFeeds)if(u.listFeeds[t]._id==u.feed._id){u.listFeeds[t]=e.data;break}}else u.listFeeds||(u.listFeeds=[]),u.listFeeds.unshift(e.data);u.feed=e.data,a.success("Lưu trạng thái thành công.","Thành công!")}else a.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")}).catch(function(e){a.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")})},u.removeFeed=function(e,n){confirm("Bạn có chắc chắn muốn xóa?")&&t.removeFeed(e).then(function(e){200==e.status&&e.data?(a.success("Xóa trạng thái thành công.","Thành công!"),u.listFeeds.splice(n,1),u.resetFeed()):a.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")}).catch(function(e){a.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")})},u.selectFeed=function(e){u.feed=e,Common.scrollTo("#feed-top","fast")},u.resetFeed=function(){u.feed={}}}e.$inject=["UserService","FeedService","$cookies","$rootScope","toastr","$timeout","$facebook","$http"],angular.module("Feed").controller("FeedController",e)}(),function(){function e(e){return{getFeeds:function(){return e.get(apiPath+"/api/feed/getFeeds")},saveFeed:function(t){return e.post(apiPath+"/api/feed/saveFeed",t)},removeFeed:function(t){return e.post(apiPath+"/api/feed/removeFeed",{feedId:t})}}}e.$inject=["$http"],angular.module("Feed").service("FeedService",e)}(),function(){angular.module("Graph",[]).config(["$interpolateProvider",function(e){e.startSymbol("{["),e.endSymbol("]}")}])}(),function(){function e(e,t,n,o,a,i,c,r,u,s,l){var h=this;h.accountInfo={},h.getAccount=function(){e.account().then(function(e){200==e.status&&(h.accountInfo=e.data,new Date(h.accountInfo.tokenExpire)<new Date&&(h.accountInfo.accessToken=""))})},h.init=function(){h.getAccount(),t.getFeeds().then(function(e){200==e.status?h.listFeeds=e.data:c.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")}).catch(function(){c.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")}),o.getAlbums().then(function(e){200==e.status?h.listAlbums=e.data:c.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")}).catch(function(){c.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")})},h.postPhotoToAlbum=function(){var e=[];h.albumId.photos.map(function(t){e.push(function(e){console.log("ss",l.settings.services.webUrl+"/files/albums/"+h.albumId._id+"/"+t),n.graphApi(h.accountInfo.accessToken,"post","/"+h.createdAlbumId+"/photos",{url:"https://www.w3schools.com/css/img_fjords.jpg"}).then(function(t){200==t.status?e(null,t.data):e(!0)}).catch(function(){e(!0)})})}),async.parallel(e,function(e,t){e?(console.log("POST PHOTO",e),c.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")):c.success("Đăng hình ảnh lên album thành công.","Thành công!")})},h.postGroup=function(e){if(!e)return void c.error("Kiểm tra lại dữ liệu và thử lại sau.","Lỗi!");var t;0==h.postType?t=n.graphApi(h.accountInfo.accessToken,"post","/"+h.groupId+"/feed",{message:h.feedId.message}):1==h.postType&&(t=n.graphApi(h.accountInfo.accessToken,"post","/"+h.groupId+"/albums",{name:h.albumId.name,message:h.albumId.message})),t.then(function(e){200==e.status?(console.log("Post group data:",e.data),c.success("Đã đăng lên nhóm thành công.","Thành công!"),1==h.postType&&(h.createdAlbumId=e.data.id,h.createdAlbumId&&h.postPhotoToAlbum())):c.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")}).catch(function(e){console.log("Err",e),c.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")})}}e.$inject=["UserService","FeedService","GraphService","AlbumService","$cookies","$rootScope","toastr","$timeout","$facebook","$http","$window"],angular.module("Graph").controller("GraphController",e)}(),function(){function e(e){return{graphApi:function(t,n,o,a){return n=n?n.toLowerCase():"get",n="get"==n?n:"post",a||(a={}),a.accessToken=t,a.apiUrl=o,a.method=n,e.post(apiPath+"/api/user/graphApi",a)}}}e.$inject=["$http"],angular.module("Graph").service("GraphService",e)}(),function(){angular.module("Schedule",[]).config(["$interpolateProvider",function(e){e.startSymbol("{["),e.endSymbol("]}")}])}(),function(){function e(e,t,n,o,a,i,c,r,u,s){var l=this;l.accountInfo={},l.schedule={},l.schedule.endTimeNumber=3,l.dateOptions={minDate:new Date((new Date).getTime()+36e5),maxDate:new Date((new Date).getTime()+9e7),sideBySide:!0},l.getAccount=function(){e.account().then(function(e){200==e.status&&(l.accountInfo=e.data,new Date(l.accountInfo.tokenExpire)<new Date&&(l.accountInfo.accessToken=""))})},l.init=function(){l.getAccount(),n.getSchedules().then(function(e){200==e.status?l.listSchedules=e.data:c.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")}).catch(function(){c.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")}),t.getCampaigns().then(function(e){200==e.status?l.listCampaigns=e.data:c.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")}).catch(function(){c.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")})},l.saveSchedule=function(e){if(!e)return void c.error("Kiểm tra lại dữ liệu và thử lại.","Lỗi!");n.saveSchedule(l.schedule).then(function(e){if(200==e.status){if(l.schedule._id){for(var t in l.listSchedules)if(l.listSchedules[t]._id==l.schedule._id){l.listSchedules[t]=e.data;break}}else l.listSchedules||(l.listSchedules=[]),l.listSchedules.unshift(e.data);l.schedule=e.data,a.ScheduleForm.$setPristine(),c.success("Lưu trạng thái thành công.","Thành công!")}else c.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")}).catch(function(e){c.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")})},l.removeSchedule=function(e,t){confirm("Bạn có chắc chắn muốn xóa?")&&n.removeSchedule(e).then(function(e){200==e.status&&e.data?(c.success("Xóa trạng thái thành công.","Thành công!"),l.listSchedules.splice(t,1),l.resetSchedule()):c.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")}).catch(function(e){c.error("Có lỗi xảy ra, thử lại sau.","Lỗi!")})},l.selectSchedule=function(e,t){l.selectScheduleIndex=t,l.schedule=e,Common.scrollTo("#schedule-top","fast")},l.resetSchedule=function(){l.schedule={}},l.runSchedule=function(e,t){confirm("Bạn có chắc chắn chạy lịch trình này?")&&(t=t||l.selectScheduleIndex,n.runSchedule(e).then(function(e){200==e.status?(l.listSchedules[t]=e.data.data,l.schedule=e.data.data,c.success(e.data.msg,"Thành công!")):c.error("Có lỗi xảy ra, vui lòng thử lại sau.","Lỗi!")}).catch(function(e){c.error(e.message,"Lỗi!")}))},l.stopSchedule=function(e,t){confirm("Bạn có chắc chắn dừng lịch trình này?")&&(t=t||l.selectScheduleIndex,n.stopSchedule(e).then(function(e){200==e.status?(l.listSchedules[t]=e.data.data,l.schedule=e.data.data,c.success(e.data.msg,"Thành công!")):c.error("Có lỗi xảy ra, vui lòng thử lại sau.","Lỗi!")}).catch(function(e){c.error(e.message,"Lỗi!")}))}}e.$inject=["UserService","CampaignService","ScheduleService","$cookies","$scope","$rootScope","toastr","$timeout","$facebook","$http"],angular.module("Schedule").controller("ScheduleController",e)}(),function(){function e(e){return{getSchedules:function(){return e.get(apiPath+"/api/schedule/getSchedules")},saveSchedule:function(t){return e.post(apiPath+"/api/schedule/saveSchedule",t)},removeSchedule:function(t){return e.post(apiPath+"/api/schedule/removeSchedule",{scheduleId:t})},runSchedule:function(t){return e.post(apiPath+"/api/schedule/runSchedule",{scheduleId:t})},stopSchedule:function(t){return e.post(apiPath+"/api/schedule/stopSchedule",{scheduleId:t})}}}e.$inject=["$http"],angular.module("Schedule").service("ScheduleService",e)}(),function(){angular.module("User",[]).config(["$interpolateProvider",function(e){e.startSymbol("{["),e.endSymbol("]}")}])}(),function(){function e(e,t,n,o,a,i,c){function r(n,i,c){e.update(n).then(function(e){console.log("Resp",e),c=c||"Cập nhật tài khoản thành công.",i&&(c+=" Đang làm mới trang."),o.success("Cập nhật tài khoản thành công!","Thông báo!"),e.data.appId&&t.put("appId",e.data.appId,{path:"/"}),i&&a(function(){window.location.reload()},2e3)}).catch(function(e){var t=e.data;o.error(t.message||t,"Thông báo!")})}var u=this;u.accountInfo={},u.showLoading=!1,u.showApiError=function(e){-1==window.location.href.search("/trang-ca-nhan")&&-1==window.location.href.search("/trang/")&&-1==window.location.href.search("/tro-giup")&&(o.error(e,"Lỗi"),a(function(){window.location.href=window.settings.services.webUrl+"/trang-ca-nhan"},2e3))},n.$on("NO_ACCESS_TOKEN_ERROR",function(){u.showApiError("Bạn chưa có mã truy cập, hãy đến trang cá nhân, bổ sung thông tin và nhận mã truy cập.")}),n.$on("TOKEN_HAS_EXPIRED_ERROR",function(){u.showApiError("Mã truy cập đã hết hạn, hãy đến trang cá nhân và cập nhật mã truy cập.")}),u.getAccount=function(){e.account().then(function(e){200==e.status&&(u.accountInfo=e.data,e.data.appId&&e.data.appSecret&&(u.appIdValid=!0),new Date(u.accountInfo.tokenExpire)<new Date&&(u.accountInfo.accessToken=""),u.accountInfo.includes("admin")&&(u.accountInfo.isAdmin=!0),u.showLoading=!0)}).catch(function(){u.showLoading=!0})},u.getAccount(),u.login=function(n){if(!n)return void o.error("Kiểm tra lại dữ liệu và thử lại.","Lỗi!");e.login({email:u.form.email,password:u.form.password}).then(function(e){console.log("Resp",e),t.put("token",e.data.token,{path:"/"}),t.put("appId",e.data.appId,{path:"/"}),window.location.reload()})},u.logout=function(){e.logout().then(function(e){t.remove("token"),window.location.reload()}).catch(function(e){t.remove("token"),window.location.reload()})},u.register=function(t){if(!t)return void o.error("Kiểm tra lại thông tin đã nhập.","Lỗi!");e.register({email:u.form.email,password:u.form.password,name:u.form.name}).then(function(e){console.log("Resp",e),o.success("Đăng ký tài khoản thành công!","Thông báo!"),a(function(){u.login(!0)},2e3)}).catch(function(e){var t=e.data;o.error(t.message||t,"Thông báo!")})},u.update=function(e){if(!e)return void o.error("Kiểm tra lại thông tin đã nhập.","Lỗi!");r({name:u.accountInfo.name,appId:u.accountInfo.appId,accessToken:u.accountInfo.accessToken,appSecret:u.accountInfo.appSecret,tokenExpire:u.accountInfo.tokenExpire,removeAccessToken:!u.appIdValid},!0)},u.getAccessToken=function(){i.login().then(function(e){console.log("getAccessToken",e),e.authResponse&&e.authResponse.accessToken&&u.extendToken(e.authResponse.accessToken)})},u.extendToken=function(t){e.extendAccessToken({accessToken:t,appId:u.accountInfo.appId,appSecret:u.accountInfo.appSecret}).then(function(e){200==e.status&&(u.accountInfo.accessToken=e.data.access_token,u.accountInfo.tokenExpire=new Date((new Date).getTime()+1e3*e.data.expires_in),u.update(!0))})},u.getGroupInfo=function(e){e&&e&&i.api("/search?q="+e+"&type=group&access_token="+u.accountInfo.accessToken).then(function(e){console.log("get group info",e),e.data&&e.data.length?u.listGroups=e.data:o.error("Không lấy được thông tin.","Lỗi!")},function(e){console.log("group info",e)})},u.removeGroup=function(e){confirm("Bạn có chắc chắn muốn xóa?")&&(u.accountInfo.groups.splice(e,1),r({groups:u.accountInfo.groups},!1,"Đã cập nhật danh sách nhóm thành công."))},u.resetAccessToken=function(){u.appIdValid=!1,u.accountInfo.accessToken=null,u.accountInfo.tokenExpire=null},u.resetListGroup=function(){u.listGroups=[]},u.addGroup=function(e){var t=e,n=!1;for(var o in u.accountInfo.groups){var a=u.accountInfo.groups[o];if(t.id==a.id){n=!0;break}}n||u.accountInfo.groups.unshift(t),e.disableClass="disabled",r({groups:u.accountInfo.groups},!1,"Đã cập nhật danh sách nhóm thành công.")}}e.$inject=["UserService","$cookies","$rootScope","toastr","$timeout","$facebook","$http"],angular.module("User").controller("UserController",e)}(),function(){function e(e){var t;return{login:function(t){return e({method:"POST",url:apiPath+"/api/user/login",data:t})},logout:function(t){return e({method:"GET",url:apiPath+"/api/user/logout"})},account:function(n){return t||(t=e({method:"GET",url:apiPath+"/api/user/account"})),t},register:function(t){return e({method:"POST",url:apiPath+"/api/user/register",data:t})},update:function(t){return e({method:"POST",url:apiPath+"/api/user/update",data:t})},extendAccessToken:function(t){return e({method:"POST",url:apiPath+"/api/user/extendAccessToken",data:t})}}}e.$inject=["$http"],angular.module("User").service("UserService",e)}();var apiPath=window.location.origin;window.location.port&&(apiPath=window.settings.services.apiUrl),function(){var e=["User","Core","Feed","Graph","Album","Campaign","Schedule","ngCookies","ngAnimate","toastr","angular-loading-bar","ngMessages","ngFacebook","ngFileUpload","ae-datetimepicker"];angular.module("HapiApp",e).config(["$httpProvider","$facebookProvider",function(e,t){e.defaults.withCredentials=!0,window.appId&&(t.setAppId(window.appId),t.setPermissions("email,publish_actions,user_managed_groups,user_photos"))}]).run(["$window",function(e){window.appId&&function(){if(!document.getElementById("facebook-jssdk")){var e=document.getElementsByTagName("script")[0],t=document.createElement("script");t.id="facebook-jssdk",t.src="//connect.facebook.net/en_US/all.js",e.parentNode.insertBefore(t,e)}}()}]).config(["$locationProvider",function(e){e.html5Mode({enabled:!0,requireBase:!1,rewriteLinks:!1})}])}();